(this.webpackJsonpiculture=this.webpackJsonpiculture||[]).push([[0],{89:function(e,t,c){},98:function(e,t,c){},99:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),r=c(30),i=c.n(r),s=(c(89),c(36)),l=c(18),j=c(64),o=c.n(j),d=c(71);function u(){return b.apply(this,arguments)}function b(){return(b=Object(d.a)(o.a.mark((function e(){var t,c,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"https://cloud.culture.tw/frontsite/trans/SearchShowAction.do?method=doFindFestivalTypeJ",t=new Request("https://cloud.culture.tw/frontsite/trans/SearchShowAction.do?method=doFindFestivalTypeJ",{method:"GET",headers:new Headers({Accept:"application/json","Content-Type":"application/json"})}),e.next=5,fetch(t);case 5:return c=e.sent,e.next=8,c.json();case 8:return n=e.sent,e.abrupt("return",n);case 12:e.prev=12,e.t0=e.catch(0),console.error("error",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}var h=Object(n.createContext)({data:[],setData:function(){},viewFilter:[],setViewFilter:function(){},like:!1,setLike:function(){},fav:[],setFav:function(){},likeList:[],setLikeList:function(){}}),O=function(){return Object(n.useContext)(h)},f=c(102),m=c(80),x=c(107),v=c(49),p=c.n(v),g=c(33),w=c(6);var N=function(e){var t=e.item,c=t.actName,a=t.address,r=t.startTime,i=t.endTime,s=t.imageUrl,l=t.actId,j=O(),o=j.like,d=j.setLike,u=j.fav,b=j.setFav,h=function(){var e=[];if(localStorage.getItem("favEvent")&&(e=JSON.parse(localStorage.getItem("favEvent")||"{}")),e.map((function(e){return e.actId})).indexOf(l)>-1)e=e.filter((function(e){return e.actId!==l}));else{var t={actId:l,actName:c,address:a,startTime:r,endTime:i,imageUrl:s};e.unshift(t)}localStorage.setItem("favEvent",JSON.stringify(e)),d(!o)};return Object(n.useEffect)((function(){!function(){var e=JSON.parse(localStorage.getItem("favEvent")||"[]");b(e)}()}),[o]),Object(w.jsx)(w.Fragment,{children:(null===u||void 0===u?void 0:u.some((function(e){return e.actId===l})))?Object(w.jsxs)(f.a,{hoverable:!0,style:{width:350,margin:"1rem"},cover:Object(w.jsx)("img",{alt:"example",src:"https://cloud.culture.tw".concat(s),className:"img"}),children:[Object(w.jsx)(x.a,{className:"icon",onClick:h,twoToneColor:"#eb2f96"}),Object(w.jsx)("p",{className:"title",children:c}),Object(w.jsx)("p",{children:a}),Object(w.jsxs)("p",{children:[Object(w.jsx)(p.a,{format:"YYYY/MM/DD",children:r}),"~",Object(w.jsx)(p.a,{format:"YYYY/MM/DD",children:i})]}),Object(w.jsx)(m.a,{children:Object(w.jsx)(g.b,{to:"details/".concat(l),children:" \u67e5\u770b\u8a73\u7d30"})})]}):Object(w.jsxs)(f.a,{hoverable:!0,style:{width:350,margin:"1rem"},cover:Object(w.jsx)("img",{alt:"example",src:"https://cloud.culture.tw".concat(s),className:"img"}),children:[Object(w.jsx)(x.a,{className:"icon",onClick:h,twoToneColor:"lightgrey"}),Object(w.jsx)("p",{className:"title",children:c}),Object(w.jsx)("p",{children:a}),Object(w.jsxs)("p",{children:[Object(w.jsx)(p.a,{format:"YYYY/MM/DD",children:r}),"~",Object(w.jsx)(p.a,{format:"YYYY/MM/DD",children:i})]}),Object(w.jsx)(m.a,{children:Object(w.jsx)(g.b,{to:"details/".concat(l),children:" \u67e5\u770b\u8a73\u7d30"})})]})})},y=c(81),F=c(104),S=c(106),k=F.a.Search;var I=function(){var e=O(),t=e.data,c=e.setViewFilter,a=Object(n.useState)(!0),r=Object(s.a)(a,2),i=r[0],l=r[1],j=Object(y.a)(t);j.map((function(e){return e.cityName=e.cityName.substring(0,3)}));var o=new Set,d=j.filter((function(e){return!o.has(e.cityName)&&o.add(e.cityName)}));return d.sort((function(e,t){return e.cityName.localeCompare(t.cityName)})),Object(n.useEffect)((function(){i?(j.sort((function(e,t){return new Date(e.endTime).valueOf()-new Date(t.endTime).valueOf()})),c(j)):(j.sort((function(e,t){return new Date(t.endTime).valueOf()-new Date(e.endTime).valueOf()})),c(j))}),[i]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{className:"search",children:Object(w.jsx)(k,{placeholder:"\u627e\u6d3b\u52d5",allowClear:!0,enterButton:"Search",size:"large",onSearch:function(e){var n=t.filter((function(t){return t.actName.includes(e)}));c(n)}})}),Object(w.jsxs)("div",{className:"container",children:[Object(w.jsx)("p",{children:"\u5730\u5340\u7be9\u9078"}),Object(w.jsxs)(S.b,{size:"small",wrap:!0,children:[Object(w.jsx)(m.a,{onClick:function(){u().then((function(e){c(e)}))},children:"\u5168\u90e8"}),null===d||void 0===d?void 0:d.map((function(e){return Object(w.jsx)(m.a,{onClick:function(){!function(e){var t=j.filter((function(t){return-1!==t.cityName.indexOf(e)}));c(t)}(e.cityName)},children:e.cityName},e.actId)}))]})]}),Object(w.jsxs)("div",{className:"search",children:[Object(w.jsx)("p",{children:"\u6642\u9593\u6392\u5e8f"}),Object(w.jsx)(m.a,{onClick:function(){l(!i)},children:"\u622a\u6b62\u65e5\u671f\u6392\u5e8f"})]})]})};var C=function(){var e=O(),t=e.setData,c=e.viewFilter,a=e.setViewFilter;return Object(n.useEffect)((function(){u().then((function(e){t(e),a(e)}))}),[]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("h2",{className:"heading",children:"\u53f0\u7063\u7bc0\u6176"}),Object(w.jsx)(I,{}),Object(w.jsx)("div",{className:"container",children:Object(w.jsx)(S.b,{size:"middle",wrap:!0,children:null===c||void 0===c?void 0:c.map((function(e){return Object(w.jsx)(N,{item:e},e.actId)}))})})]})};var D=function(){var e=O().data,t=Object(l.f)().actId,c=e.filter((function(e){return e.actId==t}));return Object(w.jsx)(w.Fragment,{children:null===c||void 0===c?void 0:c.map((function(e){return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("div",{children:[Object(w.jsx)("h2",{className:"heading",children:e.actName}),Object(w.jsxs)("div",{className:"wrap",children:[Object(w.jsx)("img",{alt:"example",src:"https://cloud.culture.tw".concat(e.imageUrl),loading:"lazy",className:"detailImg"}),Object(w.jsxs)("p",{children:["\u6642\u9593 : ",e.cycle," "]}),Object(w.jsxs)("p",{children:["\u5730\u9ede : ",e.address," "]}),Object(w.jsxs)("p",{children:["\u6d3b\u52d5\u7db2\u5740 :",Object(w.jsx)("a",{href:e.website,target:"_blank",rel:"noreferrer",children:e.actName})]}),Object(w.jsx)("p",{children:"\u7c21\u4ecb\uff1a"}),Object(w.jsx)("p",{children:e.description})]})]},e.actId)})}))})};var T=function(){var e=O().fav;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("h2",{className:"heading",children:"\u6211\u7684\u6700\u611b"}),Object(w.jsx)("div",{className:"container",children:Object(w.jsx)(S.b,{size:"middle",wrap:!0,children:null===e||void 0===e?void 0:e.map((function(e){return Object(w.jsx)(N,{item:e},e.actId)}))})})]})};var Y=function(){return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)(l.c,{children:[Object(w.jsx)(l.a,{path:"/",exact:!0,children:Object(w.jsx)(C,{})}),Object(w.jsx)(l.a,{path:"/details/:actId",children:Object(w.jsx)(D,{})}),Object(w.jsx)(l.a,{path:"/fav",exact:!0,children:Object(w.jsx)(T,{})})]})})},L=c(103),E=function(){var e=Object(n.useState)({current:"mail"}),t=Object(s.a)(e,2),c=t[0],a=t[1],r=c.current;return Object(w.jsxs)(L.a,{onClick:function(e){a({current:e.key})},selectedKeys:[r],mode:"horizontal",style:{display:"flex",justifyContent:"center"},children:[Object(w.jsx)(L.a.Item,{children:Object(w.jsx)(g.b,{to:"/",children:"\u53f0\u7063\u7bc0\u6176\u5c08\u5340"})},"mail"),Object(w.jsx)(L.a.Item,{children:Object(w.jsx)(g.b,{to:"/fav",children:"\u6211\u7684\u6700\u611b"})},"app")]})};c(97),c(98);var M=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)([]),i=Object(s.a)(r,2),l=i[0],j=i[1],o=Object(n.useState)(!1),d=Object(s.a)(o,2),u=d[0],b=d[1],O=Object(n.useState)([]),f=Object(s.a)(O,2),m=f[0],x=f[1],v=Object(n.useState)([]),p=Object(s.a)(v,2),N=p[0],y=p[1];return Object(w.jsx)(w.Fragment,{children:Object(w.jsx)(g.a,{children:Object(w.jsxs)(h.Provider,{value:{data:c,setData:a,viewFilter:l,setViewFilter:j,like:u,setLike:b,fav:m,setFav:x,likeList:N,setLikeList:y},children:[Object(w.jsx)(E,{}),Object(w.jsx)(Y,{})]})})})},J=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,108)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;c(e),n(e),a(e),r(e),i(e)}))};i.a.render(Object(w.jsx)(a.a.StrictMode,{children:Object(w.jsx)(M,{})}),document.getElementById("root")),J()}},[[99,1,2]]]);
//# sourceMappingURL=main.8bbcc43b.chunk.js.map